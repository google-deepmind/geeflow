{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to GeeFlow","text":"Python library for generating large scale geospatial datasets using Google   Earth Engine.       GitHub repository"},{"location":"#overview","title":"Overview","text":"<p>GeeFlow is a Python library from Google DeepMind for creating and processing large-scale geospatial datasets using Google Earth Engine. It contains tools and pipeline launch scripts to generate geospatial datasets.</p> <p>GeeFlow primarily focuses on supporting geospatial AI research, and it is not intended as a production-ready utility. The datasets created with GeeFlow conform to the TensorFlow Datasets (TFDS) format, which lets you use them directly with TFDS <code>tf.data.Dataset</code> data pipelines, streamlining integration into common machine learning workflows.</p> <p>The GeeFlow project is open-sourced to facilitate and accelerate research in global-scale geospatial data preparation for AI applications. The goal is to simplify the data preparation phase for machine learning experiments and abstract workflows associated with Google Earth Engine for large-scale data extraction and processing.</p> <p>To access GeeFlow, visit the GitHub repository.</p>"},{"location":"#key-features","title":"Key features","text":"<p>GeeFlow includes a set of capabilities tailored for geospatial dataset generation and processing:</p> <ul> <li>Datasets: Create small- and large-scale datasets, suitable for     both supervised and unsupervised learning tasks. These datasets are prepared     for direct ingestion into geospatial AI model training pipelines and include     precomputed standard and robust statistics.</li> <li>Inference maps: Generate inference maps that can scale up to global     coverage at any resolution, letting you apply trained models over extensive     geographical areas.</li> <li>Data support: Provide support for various types of geospatial satellite     and remote sensing data, as well as labels sourced from Google Earth Engine.</li> <li>Resolution and sampling: Enable arbitrary spatial and temporal     resolution and flexible sampling strategies for data sources, catering to     diverse research requirements.</li> <li>Tooling: Provide integrated tools for both sampling geospatial data and     generating inference maps.</li> </ul>"},{"location":"#design","title":"Design","text":"<p>GeeFlow is designed to complement model training frameworks like Jeo. While GeeFlow specializes in generating large-scale, TFDS-compatible geospatial datasets using Google Earth Engine, Jeo provides a framework for training machine learning models on such datasets, particularly using JAX and Flax. A common and intended workflow involves using GeeFlow to prepare the data, which is then ingested by Jeo or other compatible frameworks for model development, training, and evaluation.</p> <p>The existence of these separate but complementary tools provides a modular toolchain for geospatial AI research. Therefore, GeeFlow addresses the upstream data challenges inherent in working with large-scale Earth observation data, while other frameworks tackles the downstream modeling challenges. For more information, see Out of scope.</p>"},{"location":"#github-directory-structure-and-conventions","title":"GitHub directory structure and conventions","text":"<p>The following is the directory structure of core modules in the GitHub repository:</p> <ul> <li><code>main</code>: all core components.</li> <li><code>stats/</code>: the tooling to compute data statistics.</li> <li><code>configs/</code>: the configuration files to generate datasets.</li> <li><code>data/</code>: example data.</li> </ul> <p>The following are some internal conventions:</p> <ul> <li>Unless otherwise specified, <code>lat</code> and <code>lon</code> refer to latitude and longitude,     respectively.</li> <li>For GPS, the system uses the     WGS 84 coordinate     system.</li> <li>For projected coordinates, the system uses local     UTM     coordinates.</li> </ul>"},{"location":"#dataset-configuration","title":"Dataset configuration","text":"<p>To provide the needed flexibility for datasets, the <code>geeflow/configs/</code> directory of the GitHub repository contains ML Collections configuration files for dataset configurations.</p> <p>Dataset configuration is split into label configuration and source configuration:</p>"},{"location":"#label-configuration","title":"Label configuration","text":"<p>Consider the following aspects when configuring labels:</p> <ul> <li>You must provide a CSV or parquet file with     the locations of the samples, such as the <code>lat</code> and <code>lon</code> columns, and image     sizes in meters (for UTM projected samples) or degrees (for spherical     CRS).</li> <li>If you want to include other columns in the generated dataset samples, such     as image-level labels or metadata, provide the list to the <code>meta_keys</code>     field.</li> <li>You can specify the default resolution per pixel (<code>default_scale</code>) for all     sources, which the system overwrites if the source specifies its own scale,     and the reference maximal pixel size in meters (<code>max_cell_size_m</code>) for     proper gridding of multi-scale sources.</li> <li>If you want to generate separate training splits, for example, <code>train</code>,     <code>val</code>, and <code>test</code>, include a column with the split name per sample in     <code>meta_keys</code>. Otherwise, the system randomly generates the splits by     geographically separating cells based on the selected     S2 geometry scale level.</li> </ul> <p>The following is a label configuration example:</p> <pre><code>labels = ml_collections.ConfigDict()\nlabels.path = \"data/demo_labels.csv\"\nlabels.img_width_m = 240  # Image width and height of 240 meters on each side.\nlabels.max_cell_size_m = 30  # Reference maximal pixel size in meters.\nlabels.meta_keys = (\"lat\", \"lon\", \"split\")\nlabels.num_max_samples = 10  # Only for debugging, limiting the number of generated examples.\n</code></pre>"},{"location":"#source-configuration","title":"Source configuration","text":"<p>Consider the following aspects when configuring sources. This part contains named sources that Google Earth Engine provides:</p> <ul> <li>For every location <code>x</code> specified in the label configuration and every     specified source <code>s</code>, the system creates an image tensor with shape     <code>(T_s,H_s,W_s,C_s)</code> (temporal size, height, width, number of channels).     <code>T_s</code> or <code>C_s</code> might be absent, and any dimension can be one. The     dimensions can be different from source to source in dependence of the     specified spatial resolution or scale, temporal sampling, and the selected     channels.</li> <li>You define at least the source class from the <code>geeflow/ee_data.py</code> file in     the GitHub repository, where you can provide additional options, such as the     data mode, using the <code>kw</code> field. If a source class isn't defined in the     <code>ee_data.py</code> file, you can use a <code>CustomImage</code>, <code>CustomIC</code>, or <code>CustomFC</code>     configuration and set all values explicitly, such as <code>asset_name</code>.</li> <li>Other fields include the following:<ul> <li><code>scale</code>: resolution per pixel in meters.</li> <li><code>select</code>: the bands to include in the given order.</li> <li><code>sampling_kw</code>: keyword arguments for how to aggregate multiple images      within a time range.</li> </ul> </li> <li>Date ranges (<code>date_ranges</code>) are a list of time ranges that aggregate the     data for each returned time sample. A tuple of the form <code>[start date, number     of months, number of days]</code> to aggregate over specifies each date range.</li> </ul> <p>The following is a source configuration example:</p> <pre><code>sources = ml_collections.ConfigDict()\n\nsources.s2 = utils.get_source_config(\"Sentinel2\", \"ic\")\nsources.s2.kw.mode = \"L2A\"\nsources.s2.scale = 10\nsources.s2.select = [\"B3\", \"B2\", \"B1\"]\nsources.s2.sampling_kw.reduce_fn = \"median\"\nsources.s2.sampling_kw.cloud_mask_fn = ee_data.Sentinel2.im_cloud_score_plus_mask\nsources.s2.date_ranges = [(\"2023-01-01\", 12, 0), (\"2024-01-01\", 12, 0)]  # 2 annual samples\n\nsources.s1 = utils.get_source_config(\"Sentinel1\", \"ic\")\nsources.s1.kw = {\"mode\": \"IW\", \"pols\": (\"VV\", \"VH\"), \"orbit\": \"both\"}\nsources.s1.scale = 10\nsources.s1.sampling_kw.reduce_fn = \"mean\"\nsources.s1.date_ranges = [(\"2023-01-01\", 3, 0), (\"2023-04-01\", 3, 0)]  # 2 seasonal samples\n\nsources.elevation = utils.get_source_config(\"NasaDem\", \"im\")\nsources.elevation.scale = 30\nsources.elevation.select = (\"elevation\", \"slope\", \"aspect\")\n</code></pre> <p>The generated data in this example has different spatial, temporal, and spectral dimensions. The temporal samples from Sentinel-2 and Sentinel-1 cover different time ranges. This example emphasizes the flexibility of the specifications.</p>"},{"location":"#out-of-scope","title":"Out of scope","text":"<p>Specific capabilities are considered out of scope from the GeeFlow library but complement the focus on geospatial AI research:</p> <ul> <li>Model training and inference: Pick a framework, for example:<ul> <li>For Jax/Flax,    we use Jeo.</li> <li>For PyTorch, check out   TorchGeo.</li> </ul> </li> <li>Google Earth Engine data interactive visualization and analysis: Check    out, for example, geemap for Python-based    analysis. You can also explore GEE's own Javascript-based    EE Code Editor.</li> <li>Datasets repository: Check out, for example:<ul> <li>Hugging Face</li> <li>TFDS Catalog</li> <li>TorchGeo Datasets</li> </ul> </li> </ul>"},{"location":"#cite-geeflow","title":"Cite GeeFlow","text":"<p>Cite the GeeFlow codebase as follows:</p> <pre><code>@software{geeflow2025:github,\n  author = {Maxim Neumann and Anton Raichuk and Michelangelo Conserva and Keith Anderson},\n  title = {{GeeFlow}: Large scale datasets generation and processing for geospatial {AI} research}.\n  url = {https://github.com/google-deepmind/geeflow},\n  year = {2025}\n}\n</code></pre>"}]}